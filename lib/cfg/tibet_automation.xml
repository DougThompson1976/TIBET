<?xml version="1.0"?>
<!--    =============================================================   -->
<!--    TIBET Automation module file                                     -->
<!--    =============================================================   -->

<!--
-->
<package xmlns="http://www.technicalpursuit.com/1999/tibet"
    name="tibet_automation" default="base" basedir="~tibet_src/">

<config id="base" depends="">
    <config ref="driver"/>
</config>

<config id="full" depends="base">
    <config ref="driver"/>
</config>

<config id="driver" depends="">
    <script src="automation/TPGUIDriver.js" />

    <script>
        <![CDATA[
        if (TP.sys.cfg('boot.context') === 'phantomjs') {
            //  Syn has a very strange way of configuring. If you assign a POJO
            //  to it *before* you load it, it will take that object and use it
            //  as configuration data. Here we stub out the 'schedule' call
            //  (which normally uses a setTimeout()) on PhantomJS, because there
            //  are a lot of problems with setTimeout() and PhantomJS.
            Syn = {'schedule' : function (fn, ms) {return fn()}};
        }
        ]]>
    </script>

    <script src="~lib_deps/syn-tpi.min.js"
        unless="boot.unminified" no-minify="true" no-lint="true"/>
    <script src="~lib_deps/syn-tpi.js"
        if="boot.unminified" no-lint="true"/>

    <script>
        <![CDATA[
        TP.extern.syn = Syn;
        ]]>
    </script>
</config>

</package>

