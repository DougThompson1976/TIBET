<?xml version="1.0"?>
<!--    =============================================================   -->
<!--    TIBET Automation module file                                     -->
<!--    =============================================================   -->

<!--
-->
<package xmlns="http://www.technicalpursuit.com/1999/tibet"
    name="tibet_automation" default="base" basedir="~tibet_src/">

<config id="base" depends="">
    <config ref="driver"/>
</config>

<config id="full" depends="base">
    <config ref="gui"/>
    <config ref="tsh"/>
</config>

<config id="gui" depends="">
    <script src="automation/TPGUIDriver.js" />

    <script>
        <![CDATA[
        //  Because our automation system uses Promises in conjunction with Syn,
        //  we have to define an alternate version of Syn's 'schedule' call that
        //  uses a timeout to call the GUI thread to run between event dispatches.
        Syn = {
            'schedule' :
                function (fn, ms) {
                    setTimeout(fn, TP.sys.cfg('test.anti_starve_timeout'));
                }
            };
        ]]>
    </script>

    <script src="~lib_deps/syn-tpi.min.js"
        unless="boot.unminified" no-minify="true" no-lint="true"/>
    <script src="~lib_deps/syn-tpi.js"
        if="boot.unminified" no-lint="true"/>

    <script>
        <![CDATA[
        TP.extern.syn = Syn;
        ]]>
    </script>
</config>

<config id="tsh" depends="">
    <script src="automation/TPShellDriver.js" />
    <script src="automation/tsh_testCmd.js" />
</config>

</package>

