<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
<title></title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript" src="../../../lib/thirdparty/tiny_mce/tiny_mce.js"></script>

<script type="text/javascript">
tinyMCE.init(
{
	theme : 'advanced',
	mode : 'exact',
	elements: 'editArea',
	width : '100%',
	height : '100%',

	oninit : function ()
	{
		window.frameElement.frameLoad();
	},

	theme_advanced_buttons1 : "mybutton,bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink,save",
	theme_advanced_buttons2 : "",
	theme_advanced_buttons3 : "",
	theme_advanced_toolbar_location : "top",
	theme_advanced_toolbar_align : "left",
	theme_advanced_statusbar_location : "bottom",
	//theme_advanced_resizing : "true",	// fix when we fix resizing below
	plugins : 'inlinepopups,save',
	init_instance_callback: 'resizeEditorBox',

	setup : function(editor)
	{
		/*
		editor.onInit.add(
			function(ed)
			{
				editor.dom.bind(
						editor.getWin(),
						'resize',
						function()
						{
							//	TODO: This isn't the right window... and if
							//	this is picking up onresize from the iframe,
							//	won't it recurse?
							//editor.getWin().resizeEditorBox();
						});
			});

		// Display an alert onclick
		editor.onClick.add(
			function(ed)
			{
				//ed.windowManager.alert('User clicked the editor.');
			});
		*/
	}
});

</script>

<script type="text/javascript">
resizeEditorBox = function (editor)
{
	var editorTD;
	var editorIFrame;

	var headerTD;
	var footerTD;

	var measureElem;

	editorTD = editor.contentAreaContainer;
	editorIFrame = editorTD.firstChild;

	headerTD = editorTD.parentNode.previousSibling.firstChild;
	footerTD = editorTD.parentNode.nextSibling.firstChild;

	measureElem = document.getElementById('measureElem');

	totalWidth = measureElem.offsetWidth -
					2;

	totalHeight = measureElem.offsetHeight -
					headerTD.offsetHeight -
					footerTD.offsetHeight -
					2;

	editorTD.style.width = totalWidth + 'px';
	editorTD.style.height = totalHeight + 'px';
	editorIFrame.style.width = totalWidth + 'px';
	editorIFrame.style.height = totalHeight + 'px';
}
</script>

<style type="text/css">
html, body
{
	width: 100%;
	height: 100%;
}
body
{
	margin: 0px;
	padding: 0px;
}
#measureElem
{
	width: 100%;
	height: 100%;
}
</style>

</head>

<body>
	<div id="measureElem">
		<div id="editArea"></div>
	</div>
</body>
</html>
