<?xml version="1.0"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:tsh="http://www.technicalpursuit.com/1999/tshell">

<head>

	<title></title>

	<script type="text/javascript" src="~lib_lib/src/tibet_hook.min.js">
	</script>

    <link type="text/css" rel="stylesheet" href="~lib_lib/css/tibet.css"/>

</head>

<body xmlns:bind="http://www.technicalpursuit.com/2005/binding">

	<h2>Bind Test #8</h2><br/>
	<br/>
	<br/>
	This test sets up a 'simple binding' between various XHTML controls and an empty piece of JSON data, set up by the event handler embedded in this document. This test also uses a 'pure URI' as a top-level binding scope to avoid having to repeat the full qualifications for the bind scope on each bind.<br/>
	<br/>
	<br/>

	<br/>
	Enter data into the text fields and textarea, choose from the select pull down and check the checkboxes and radio buttons to set data into the model and watch the model output below to see the resultant JSON.
	<br/>
	<br/>

    <!-- Set up a span to define the binding scope -->
    <span bind:scope="urn:tibet:Bind8_person">

        <label for="firstNameField">First name: </label>
        <input type="text" id="firstNameField" bind:io="value: #tibet(person.firstname)" tabindex="0"/><br/>

        <label for="lastNameField">Last name: </label>
        <input type="text" id="lastNameField" bind:io="value: #tibet(person.lastname)" tabindex="0"/><br/>

        <label for="descriptionField">Description: </label>
        <textarea id="descriptionField" bind:io="value: #tibet(person.description)" tabindex="0"></textarea><br/>

        <label for="genderField">Gender: </label>
        <select id="genderField" bind:io="value: #tibet(person.gender)" tabindex="0">
            <option value="m">Male</option>
            <option value="f">Female</option>
        </select>

        <br/>
        <span>Favorite Pet:</span>
        <br/>

        <input type="radio" name="input_radio" value="dog" id="petRadio1" bind:io="checked: #tibet(person.pet)"/><label for="petRadio1">Dog</label>
        <input type="radio" name="input_radio" value="cat" id="petRadio2"/><label for="petRadio2">Cat</label>
        <input type="radio" name="input_radio" value="fish" id="petRadio3"/><label for="petRadio3">Fish</label>

        <br/>
        <span>Favorite Color:</span>
        <br/>

        <input type="checkbox" name="input_checkbox" value="red" id="colorCheckbox1" bind:io="checked: #tibet(person.color)"/><label for="colorCheckbox1">Red</label>
        <input type="checkbox" name="input_checkbox" value="blue" id="colorCheckbox2"/><label for="colorCheckbox2">Blue</label>
        <input type="checkbox" name="input_checkbox" value="yellow" id="colorCheckbox3"/><label for="colorCheckbox3">Yellow</label>

    </span>

    <!-- Any aspect changing -->
    <ev:script type="text/javascript" event="TP.sig.Change" observer="urn:tibet:Bind8_person">
        <![CDATA[
        TP.byOID('modelOutput').setProcessedContent(
                    '<span>' +
                    TP.json(triggerSignal.getSignalOrigin().getResource()) +
                    '</span>');
        ]]>
    </ev:script>

    <br/>
    Current data model:<br/><br/><span id="modelOutput"/>
    <br/>

	<!-- Data model construction handler -->
	<ev:script type="text/javascript" event="TP.sig.DOMContentLoaded" observer="#document">
        <![CDATA[
        var newInst;
            newInst = TP.json2js(
                '{"person": {"lastname": "Jones", "firstname": "Jane", "description": "Ms. Jones is a great lady", "gender": "f", "pet": "cat", "color": "blue"}}'
            );
		TP.uc('urn:tibet:Bind8_person').setResource(newInst);
		]]>
	</ev:script>

</body>
</html>
