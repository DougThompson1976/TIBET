<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>

<title>{{appname}}</title>
<meta name="description" content="{{appname}}"/>
<meta name="author" content="{{appname}}"/>

<link rel="shortcut icon" href="./images/favicon.png" type="image/x-icon"/>
<link rel="icon" href="./images/favicon.png" type="image/x-icon"/>

<style type="text/css">
html,body,iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    border: 0;
}
iframe {
    overflow: hidden;
}
body[data-stage="silent"] #UIBOOT {
    display: none;
}
body[data-stage="liftoff"] #UIBOOT {
    display: none;
}
</style>

</head

<!-- Add data-stage="silent" to body to turn off console display -->
<body onload="init()">

<!--
UIROOT Alternatives:
    splash.xhtml                Single splash page or site content (default).
    multiscreen.xhtml           Multiple "screen" (ui iframe) support.
    singlescreen.xhtml          Single "screen" (ui iframe) with splash.
    multiscreen_framed.xhtml    Multiple "screen" support plus IDE framing.
    singlescreen_framed.xhtml   Single "screen" support plus IDE framing.
-->

<!-- Application UI. Configure here or via boot.rootpage parameter -->
<iframe id="UIROOT" frameborder="0" src="./html/splash.xhtml"></iframe>

<!-- TIBET boot IU. Comment out for faster booting. -->
<iframe id="UIBOOT" frameborder="0" src="./html/console.xhtml"></iframe>

<!-- TIBET boot JS. -->
<script src="./node_modules/tibet3/base/lib/tibet/src/tibet_boot.js"
    type="text/javascript"></script>

<!-- This file will not be required in index.html in future. -->
<script src="./node_modules/tibet3/base/lib/tibet/src/tibet_hook.js"
    type="text/javascript"></script>

<!-- eventually this will be not be required -->
<script src="../node_modules/tibet3/base/lib/tibet/src/tibet_pack.js"
    type="text/javascript"></script>

<script type="text/javascript">
//<![CDATA[
function init() {
    var nologin;

    // Temporary while we wait on a full port into the new TIBET 5 repo.
    TP.sys.setcfg('boot.tibetlib', 'tibet3');

    //  Avoid cycling when the login page was the first page into the user
    //  interface (double-click, bookmark, shortcut, etc.)
    nologin = /\?L=false/.test(window.location.toString());
    if (nologin == true) {
        setTimeout(function() {
            //  Turn off logins when we came from a login page already.
            TP.boot.launch(false, true);
        }, 0);
    } else {
        setTimeout(function() {
            //  Launch application with login visible and background loading.
            //TP.boot.launch(true, true);   // Adjust timeout as needed.

            //  Launch application with login visible, wait for success to boot.
            //TP.boot.launch(true, false);  // Adjust timeout as needed.

            //  Launch application without login required, boot immediately.
            TP.boot.launch(false);
        }, 0);
    }
}
//]]>
</script>

</body>
</html>
