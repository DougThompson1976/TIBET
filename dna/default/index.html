<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>{{appname}}</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="chrome=1"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>

<link rel="stylesheet" type="text/css" href="./css/master.css"/>

<!-- TODO move to a TIBET-based CSS file -->
<style type="text/css">
#UIROOT
{
  display: none;
}

div#checking, div#booting, div#pausing, div#bugs, div#timeout, div#unsupported, div#ie_bugs, div#ff_bugs, div#wk_bugs
{
  font-size: 110%;
  display: none;

  top: 0px;
  bottom: 0px;
  height: auto;
  margin: 0px 10px;
}

body .error
{
  display: none;
}

body.error .error
{
  display: block;
}

body .unsupported
{
  display: none;
}

body.unsupported .unsupported
{
  display: block;
}

body .IE
{
  display: none;
}

body.IE .IE
{
  display: block;
}

body .FF
{
  display: none;
}

body.FF .FF
{
  display: block;
}

body .WK
{
  display: none;
}

body.WK .WK
{
  display: block;
}

span.button
{
  margin-right: 2em;
}

div#tdc_content_header
{
  background-color: transparent;
  border: 0px;
}

div#tdc_content_header .body
{
  border: 1px solid #999;
}

div#tdc_content_div
{
  right: 0px;
  width: auto;
}

div#tdc_content_scroll
{
  display: none;
}

.middle_center
{
  border: 1px solid #999999;

  top: 32px;
  right: 100px;
  bottom: 32px;
  left: 100px;
}

.middle_center .hud_panel > .head
{
  height: 50px;
}
.middle_center .hud_panel > .body
{
  top: 50px;
  bottom: 50px;
}
.middle_center .hud_panel > .foot
{
  height: 50px;
}
</style>
</head>

<!--body-->
<body onload="init();">
<!--body onload="TP.boot.launch(false, true, false);" class="unsupported"-->

<div id="top_background" class="background">

  <div id="top_left" class="top_left">
  </div>

  <div id="top_center" class="top_center">
  </div>

  <div id="top_right" class="top_right">
  </div>

  <div id="middle_left" class="middle_left">
  </div>

  <div id="middle_center" class="middle_center">

  <div id="tdc_content" class="hud_stack tdc_content">
  <div id="tdc_content_panel" class="hud_panel">
    <div class="head">
      <div id="tdc_content_header" class="hud_bubble tdc_notice">
        <div class="head"></div>
        <div class="body">
          <div class="title tdc_notifier">TIBET &#8482; Developer Portal (TDP) and Interactive Web Shell (TSH) v3.0.0a3</div>
        </div>
        <div class="foot"></div>
      </div>
    </div>
    <div class="body worldview">
      <div id="tdc_content_div" class="console_content">

      <div id="checking">
        <div class="announce">Checking configuration...</div>
      </div>

      <div id="booting">
        <!-- the PageContent div is used by the "console" boot display
          mode which replaces all child content of that div with log
          output -->
        <div id="PageContent">

          <!-- the ProgressText div is used for text output related
          to both the "graphical" and "counter" boot display modes.
          the various spans here show load/defer status, current
          boot file/path, and completion data in percentage or
          number form -->
          <div id="ProgressText" class="bootmsg">
            <span id="ProgressDefer">Generating</span>
            <span id="ProgressPath">manifest...</span>
          </div>
          <div id="ProgressStatus" class="bootmsg">
            <span id="ProgressComplete">0%</span>
          </div>

          <!-- the ProgressBorder and ProgressBar provide support
          for the "graphical" boot display, showing load percentage
          visually -->
          <div id="ProgressBorder" class="clear">
            <div id="ProgressBarOne"></div>
            <div id="ProgressBarTwo"></div>
          </div>

          <div class="section error">
            <span class="heading">&nbsp;</span>
            <span class="msg">
              <span class="button">
                <a href="javascript: void(0)" onclick="TP.boot.showBootLog();return false">boot log</a>
              </span>
              <span class="button">
                <a href="index.html" onclick="TP.boot.launchApp();">retry</a>
              </span>
            </span>
          </div>
        </div>
      </div>

      <div id="pausing">
        <div class="announce">Application pause...</div>
        <div class="section">
          <span class="heading">Last minute checks?</span>
          <span class="msg">The application code has loaded; now you can view the boot log, start your favorite debugger, or grab a cup of coffee. Click &#39;start ui&#39; when you&#39;re ready to enter the application.</span>
        </div>
        <div class="section"></div>
        <div class="section">
          <span class="heading">&nbsp;</span>
          <span class="msg">
            <span class="button">
              <a href="javascript: void(0)" onclick="TP.boot.showBootLog();return false">boot log</a>
            </span>
            <span class="button">
              <a href="javascript: void(0)" onclick="TP.boot.startGUI();return false">start ui</a>
            </span>
          </span>
        </div>
      </div>

      <div id="bugs">
        <div class="alert">Oops! There&#39;s been an error...</div>
        <div class="section FF">
          <span class="heading">Firefox Users</span>
          <span class="msg">If you&#39;re trying to run your application from the file system you may need to enable additional privileges to read the application files.&nbsp;
          <a href="javascript: void(0)" onclick="TP.boot.showFFErrorDetail()">Read more...</a></span>
        </div>
        <div class="section IE">
          <span class="heading">IE7 Users</span>
          <span class="msg">If you&#39;re trying to run your application from the file system you may need to enable additional privileges to read the application files. If you see a security bar at the top of this page you need to enable the requested permissions and then click &#39;retry&#39; below.&nbsp;
          <a href="javascript: void(0)" onclick="TP.boot.showIEErrorDetail()">Read more...</a></span>
        </div>
        <div class="section WK">
          <span class="heading">Safari/Chrome Users</span>
          <span class="msg">If you&#39;re trying to run your application from the file system you should not need to enable additional privileges to read the application files.&nbsp;
          <a href="javascript: void(0)" onclick="TP.boot.showWKErrorDetail()">Read more...</a></span>
        </div>
        <div class="section"></div>
        <div class="section">
          <span class="heading">&nbsp;</span>
          <span class="msg">
            <span class="button">
              <a href="javascript: void(0)" onclick="TP.boot.showBootLog();return false">boot log</a>
            </span>
            <span class="button">
              <a href="index.html" onclick="TP.boot.launchApp();">retry</a>
            </span>
          </span>
        </div>
      </div>

      <div id="ff_bugs" class="FF">
        <div class="alert">Firefox and the file system...</div>
        <div class="section">
          <span class="heading">What&#39;s going on?</span>
          <span class="msg">As of Firefox 3, pages loaded from the file system which contain JavaScript are subject to additional security checks. To run this application you will need to grant permission to execute JavaScript that is loading from the file system or have the application administrator alter your application configuration on disk.</span>
        </div>
        <div class="section">
          <span class="heading">Enabling this permanently.</span>
          <span class="msg">Follow this procedure to avoid this error in the future:<br/><br/> 1. Enter about:config in the browser&#39;s URI field.<br/> 2. Find the setting for &#39;security.fileuri.strict_origin_policy&#39; and set it to false.<br/>
          3. Quit Firefox and restart your TIBET-based application.<br/><br/>
          OR, if you're not comfortable with changing that
          setting:<br/><br/>
          1. Notify the application administrator and direct them to the TIBET installation guide section on Firefox and file-based application use. If that's you, follow the steps defined there to create a reference to the TIBET library in ~app_lib/tibet.
          </span>
        </div>
      </div>

      <div id="ie_bugs" class="IE">
        <div class="alert">IE and the file system...</div>
        <div class="section">
          <span class="heading">What&#39;s going on?</span>
          <span class="msg">As of Internet Explorer 7, pages loaded from the file system which contain JavaScript are subject to additional security checks. To run this application you will need to grant permission to execute JavaScript that is loading from the file system by accepting the prompt on the security bar visible at the top of the browser.</span>
        </div>
        <div class="section">
          <span class="heading">Enabling this permanently.</span>
          <span class="msg">To avoid this prompt in the future, follow this procedure:<br/><br/>
          1. Go to the Tools menu and select the Internet Options menu item.<br/>
          2. Go to the Advanced tab and find the Security group of checkboxes.<br/>
          3. Select &quot;Allow active content to run in files on My Computer&quot;.<br/>
          4. Quit Internet Explorer and restart your TIBET-based application.</span>
        </div>
      </div>

      <div id="wk_bugs" class="WK">
        <div class="alert">Safari/Chrome and the file system...</div>
        <div class="section">
          <span class="heading">What&#39;s going on?</span>
          <span class="msg">As of Safari 5.X and Chrome 6.X, pages loaded from the file system should have no restrictions on loading themselves. There may very well be other restrictions on what can be done from pages loaded from the file system..</span>
        </div>
      </div>

      <div id="timeout">
        <div class="alert">Oops! Your login attempt timed out...</div>
        <div class="section">
          <span class="heading">Login Timeout</span>
          <span class="msg">Your login attempt has timed out. This application requires your login to be completed within 30 seconds. Click &#39;retry&#39; below to log in again.</span>
        </div>
        <div class="section"></div>
        <div class="section">
          <span class="heading">&nbsp;</span>
          <span class="msg">
            <span class="button">
              <a href="javascript: void(0)" onclick="TP.boot.showBootLog();return false">boot log</a>
            </span>
            <span class="button">
              <a href="index.html" onclick="TP.boot.launchApp();">retry</a>
            </span>
          </span>
        </div>
      </div>

      <div id="unsupported">
        <div class="alert">Oops! Looks like an unsupported browser...</div>
        <div class="section unsupported">
          <span class="heading">Supported Browser?</span>
          <span class="msg">This application supports Google Chrome 6.X, Firefox 4.X, IE 9.X and Safari 5.X. IE6 / IE7 / IE8 support is provided through <a href="http://www.google.com/chromeframe/eula.html">Google Chrome Frame</a>
          </span>
        </div>
        <div class="section"></div>
        <div class="section">
          <span class="heading">&nbsp;</span>
          <span class="msg">
            <span class="button">
              <a href="index.html" onclick="TP.boot.launchApp();">retry</a>
            </span>
          </span>
        </div>
      </div>

      <noscript>
        <div class="alert">Oops! Looks like JavaScript is not available...</div>
        <div class="section">
          <span class="heading">Proper Preferences?</span>
          <span class="msg">You need to enable JavaScript in your browser to run this application. You can do that using the Preferences panel of your browser application. See your system administrator or the TIBET Installation Guide for more info.</span>
        </div>
        <div class="section"></div>
        <div class="section unsupported">
          <span class="heading">Supported Browser?</span>
          <span class="msg">This application supports Google Chrome 6.X, Firefox 4.X, IE 9.X and Safari 5.X. IE6 / IE7 / IE8 support is provided through <a href="http://www.google.com/chromeframe/eula.html">Google Chrome Frame</a>
          </span>
        </div>
        <div class="section"></div>
        <div class="section">
          <span class="heading">&nbsp;</span>
          <span class="msg">
            <span class="button">
              <a href="index.html">retry</a>
            </span>
          </span>
        </div>
      </noscript>


      </div>
      <div id="tdc_content_scroll" class="hud_slider console_slider">
        <div class="head"></div>
        <div class="body">
          <div class="grip"></div>
        </div>
        <div class="foot"></div>
      </div>
    </div>
    <div class="foot">
      <div id="tdc_content_footer" class="hud_bubble hud_status
      copyright">
        <div class="head">
          <div class="title copyright">Copyright &#169; 1999-2011, Technical Pursuit Inc.</div>
        </div>
        <div class="body">
        </div>
        <div class="foot">
          <div class="title copyright">Patent Pending, All Rights Reserved.</div>
        </div>
      </div>
    </div>
  </div>
</div>

  </div>

  <div id="middle_right" class="middle_right">
  </div>

  <div id="bottom_left" class="bottom_left">
  </div>

  <div id="bottom_center" class="bottom_center">
  </div>

  <div id="bottom_right" class="bottom_right">
  </div>

</div>

<!-- the index page should include both boot and hook files in that order -->
<script src="./node_modules/tibet3/base/lib/tibet/src/tibet_boot.js" type="text/javascript"></script>
<script src="./node_modules/tibet3/base/lib/tibet/src/tibet_hook.js" type="text/javascript"></script>
<script src="./node_modules/tibet3/base/lib/tibet/src/tibet_pack.js" type="text/javascript"></script>

<script type="text/javascript">
<!--
function init()
{
  var nologin;

  // !!! NOTE: Temporary since we're leveraging the 3.0 codebase as our library.
  // This could be set up during clone processing if we find the library.
  TP.sys.setcfg('boot.tibetlib', 'tibet3');

  TP.boot.showContent('checking');

  //  (ss) uncomment for page testing
  //setTimeout(function() { TP.boot.showContent('bugs'); }, 1000); return;

  //  avoid cycling when the login page was the first page into the user
  //  interface (double-click, bookmark, shortcut, etc.)
  nologin = /\?L=false/.test(window.location.toString());
  if (nologin == true)
  {
    setTimeout(function()
    {
      //  turn off logins when we came from a login page already
      TP.boot.launch(false, true);
    }, 500);
  }
  else
  {
    setTimeout(function() 
    {
      //  login with parallel phase-one booting
      //TP.boot.launch(true, true);

      //  login with 'wait for authentication' booting
      //TP.boot.launch(true, false);

      //  no login required, start booting immediately
      TP.boot.launch(false);
    }, 500);
  };
};
-->
</script>

<!-- TODO: replace with a {{libroot}} template here -->
<iframe id="UIROOT" src="./node_modules/tibet3/base/lib/tibet/xhtml/tp_launch_stub.xhtml"/>

</body>
</html>
