<?xml version="1.0"?>
<package name="{{appname}}" default="help" basedir="~app_root/TIBET-INF">

<property name="boot.version" value="20140125"/>

<!--  =============================================================   -->
<!--  TIBET boot_prefix config                                        -->
<!--  =============================================================   -->
<!--  this block loads/runs prior to any other config you specify    -->
<config id="boot_prefix" if="boot.phaseone">
  <echo>tibet.xml boot_prefix loading complete.</echo>
</config>

<!--  =============================================================   -->
<!--  Standard application config                                    -->
<!--  =============================================================   -->
<!--  -->
<config id="all">
  <config ref="code"/>
  <config ref="docs"/>
</config>
<config id="code">
  <config ref="boot_prefix"/>
  <config ref="tibet"/>
  <config ref="app"/>
  <config ref="boot_suffix"/>
</config>

<config id="docs">
</config>

<config id="help">
</config>

<config id="test">
</config>

<!--  =============================================================   -->
<!--  TIBET configuration                                             -->
<!--  =============================================================   -->
<!--  -->
<config id="tibet">

  <!-- NOTE these modules are loaded in phase one -->
  <config ref="tibet_img" if="boot.phaseone"/>
  <echo if="boot.phaseone">tibet image-base loading complete.</echo>
  <config ref="tibet_chg" if="boot.phaseone"/>
  <echo if="boot.phaseone">tibet change-set loading complete.</echo>
</config>

<!--  -->
<config id="tibet_img">
  <package src="~lib_cfg/TIBET.xml" config="{boot.image}"/>
</config>

<!--  -->
<config id="tibet_chg">
<!-- Any change sets for the TIBET image (patches etc) -->
  <script>
    <![CDATA[
    ]]>
  </script>
</config>

<!--  =============================================================   -->
<!--  App configuration                                               -->
<!--  =============================================================   -->
<!--  -->
<config id="app">

  <!-- NOTE these modules are loaded in phase two -->
  <config ref="app_img" if="boot.phasetwo"/>
  <echo if="boot.phasetwo">app image-base loading complete.</echo>
  <config ref="app_chg" if="boot.phasetwo"/>
  <echo if="boot.phasetwo">app change-set loading complete.</echo>
</config>

<!--
-->
<config id="app_img">
  <package src="~app_cfg/app.xml" config="full"/>
</config>

<config id="app_chg">
  <!--
  Any change sets for the Application image (patches etc)
  -->
  <script>
    <![CDATA[
    ]]>
  </script>
</config>

<!--  =============================================================   -->
<!--  TIBET boot_suffix config                                        -->
<!--  =============================================================   -->
<!--  this block runs prior to $$main() but after code has loaded     -->
<config id="boot_suffix" if="boot.phasetwo">
  <echo>tibet.xml boot_suffix loading complete.</echo>
</config>

</package>

