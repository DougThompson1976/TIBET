<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

	<title></title>

    <script src="../lib/src/tibet_hook.min.js"></script>

    <link type="text/css" rel="stylesheet" href="~lib_styles/tibet.css"/>

    <tibet:style type="less" href="tibet_demos.less"/>

</head>

<body xmlns:bind="http://www.technicalpursuit.com/2005/binding">

	<h2>PouchDB Football Results</h2><br/>
	<br/>

    <!--Status: <span id="status" bind:in="content:
         tibet://uicanvas#tibet((#loadProvider).status)"/> -->

    <button onclick="TP.byId('loadProvider').trigger()">Refresh it!</button>
    <button onclick="TP.byId('saveProvider').trigger()">Save it!</button>

    Auto-refresh: <input type="checkbox" onclick="TP.byId('loadProvider').toggle('autorefresh')"/>

    Test (first unescapedUrl): <input type="text" bind:io="value: urn:tibet:sameFootballData#tibet(responseData.results[0].unescapedUrl)" onchange="TP.byId('testChangeSaveProvider').trigger()"/>

	<br/>
    <br/>

    <span bind:scope="urn:tibet:footballData#tibet()">
        Estimated Result Count: <span bind:in="value: responseData.cursor.estimatedResultCount"/>
        <table>
            <thead>
                <tr>
                    <th>Unescaped URL</th>
                    <th>Title</th>
                    <th>Content</th>
                </tr>
            </thead>
            <tbody id="people" bind:repeat="responseData.results" bind:editable="true">
                <tr>
                    <td>[[unescapedUrl]]</td>
                    <td>[[titleNoFormatting]]</td>
                    <td>[[content]]</td>
                </tr>
            </tbody>
        </table>
    </span>

    <tibet:service id="loadProvider"
                href="pouchdb://test/football_info"
                result="urn:tibet:footballData"
                activateOn="AttachComplete"/>

    <tibet:service id="saveProvider"
                href="pouchdb://test/football_info"
                body="urn:tibet:footballData"
                method="PUT"
                mimetype="application/json"/>

    <tibet:service id="testChangeLoadProvider"
                href="pouchdb://test/football_info"
                result="urn:tibet:sameFootballData"
                activateOn="AttachComplete"/>

    <tibet:service id="testChangeSaveProvider"
                href="pouchdb://test/football_info"
                body="urn:tibet:sameFootballData"
                method="PUT"
                mimetype="application/json"/>

</body>
</html>
